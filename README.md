# Лабораторная работа №II.2. Разработка библиотеки для операций над матрицами

## Оглавление

- [Вступление](#описание-проекта)
    - [Цель проекта](#цель-работы)
    - [Задачи проекта](#основные-задачи)
    - [Структура проекта](#структура-проекта)
- [Список доступных функций](#функции-реализованные-в-библиотеке)
- [Сборка и запуск](#сборка-и-запуск-проекта)
- [Тестирование](#тестирование)
- [Вывод](#вывод)


## Описание проекта

Данный проект представляет собой библиотеку для работы с матрицами, 
реализующую базовые и расширенные операции: создание, освобождение, транспонирование, 
нахождение минора и определителя, арифметические операции и вывод. 
Библиотека построена с использованием структур `Matrix`, `MatrixOutcome` и 
`MatrixDeterminant` для удобного хранения и обработки данных и ошибок.

### Цель работы:

Освоить методы реализации операций над матрицами в языке C, 
включая динамическое выделение памяти, работу с файлами, обработку ошибок и
реализацию функциональных интерфейсов.


### Основные задачи:
1. Реализация базовых операций над матрицами, включая создание, освобождение, копирование и вывод.
2. Поддержка арифметических операций: сумма, разность, умножение.
3. Поддержка линейной алгебры: транспонирование, определитель, минор.
4. Внедрение системы обработки ошибок с использованием перечисления `MatrixErrorCode`.
5. Подключение модулей вывода в консоль и файл.
6. Автоматизированная сборка проекта и тестирование.


### Структура проекта
```
/matrix_lib_c
│── src/
│   │── errors/
│   │   │── messages/
│   │   │   │── locales/
│   │   │   │   │── locale_en.c
│   │   │   │   │── locale_ru.c
│   │   │   │── messages.h
│   │   │   │── messages.c 
│   │   │── errors.c
│   │   │── errors.h
│   │── matrix/
│   │   │── matrix.c
│   │   │── matrix.h
│   │── output/
│   │   │── output.c
│   │   │── output.h
│   │── main.c
│── tests/
│   │── test_runner.c
│   │── tests_main.c
│   │── tests_matrix.c
│   │── tests_output.c
│── include/
│   │── config.h
│── data/
│   │── input/
│   │── output/
│── Makefile
│── Doxyfile
│── .clang-format
│── README.md
│── .gitignore
```

**Описание файлов и дирректорий:**
- **errors.h/errors.c** — модуль обработки ошибок, содержащий коды и проверки.
- **messages.h/messages.c** — модуль, отвечающий за поддержку нескольких языков.
- **locale_en.c/locale_ru.c** - текстовые сообщения об ошибках на разные языках.
- **matrix.h/matrix.c** — основная реализация структур и функций работы с матрицами.
- **output.h/output.c** — функции вывода в консоль и файл.
- **main.c** — демонстрационная программа.
- **test_runner.c** — модуль запуска всех тестов.
- **tests_main.c** — тесты для основного модуля приложения.
- **tests_matrix.c** — Модуль реализации тестов для функций работы с матрицей.
- **tests_main.c** — тесты для функций вывода.
- **config.h** — основные настройки программы.
- **data/ouput** - содержит выходные данные (если пользователь выполнял запись в файл).
- **data/input** - содержит входные данные формата:
```math
n_{1,1} n_{1,2} ... n_{1,j}
n_{2,1} n_{2,2} ... n_{2,j}
. . . . . . . . . . . . . . 
n_{i,1} n_{i,2} ... n_{i,j}
```
- **Makefile** — сборка и тестирование проекта.
- **.gitignore** — настройка отслеживаемых файлов для git.
- **Doxyfile** — конфиг для генерации документации doxygen.
- **clang-format** — конфиг для форматирования кода через clang.
- **README.md** — описание проекта.

## Функции, реализованные в библиотеке

### Функции для операций над матрицами
Функция | Описание
--- | ---
`createMatrix()` | Создает новую матрицу.
`destroyMatrix()` | Освобождает память матрицы.
`freeMatrixOutcome()` | Освобождает память и очищает `MatrixOutcome`.
`fillMatrix()` | Заполняет матрицу данными из массива.
`loadMatrixFromFile()` | Загружает матрицу из файла.
`createMinor()` | Создает минор матрицы.
`getSumOrDiffMatrices()` | Вычисляет сумму или разность матриц.
`getMatrixCopy()` | Копирует матрицу.
`transposeMatrix()` | Транспонирует матрицу.
`calculateDeterminant()` | Вычисляет определитель.
`multiplyMatrices()` | Умножает матрицы.
`prepareMatrixBuffer()` | Преобразует матрицу в строку для вывода.
`printMatrix()` | Выводит матрицу через callback-функцию.
`canExclude()` | Проверяет возможность исключения строки/столбца.
`canMultiplyMatrices()` | Проверяет совместимость для умножения.
`isMatricesSizesEqual()` | Сравнивает размеры двух матриц.
`isSquareMatrix` | Проверяет, является ли матрица квадратной.

### Функции для вывода
Функция | Описание
--- | ---
`outputToStd()` | Выводит матрицу в передаваемый поток.
`outputToFile()` | Выводит матрицу в файл.

### Функции проверки данных и обработки ошибок
Функция | Описание
--- | ---
`getErrorMessage()` | Возвращает строковое сообщение по коду ошибки.

## Сборка и запуск проекта

**Сборка проекта:**
```sh
make
```

**Полная очистка:**
```sh
make clean
```

**Пересборка проекта:**
```sh
make rebuild
```

**Проверка форматирования:**
```sh
make clang-check
```

**Применение форматирование:**
```sh
make clang-format
```

**Запуск программы:**
```sh
./bin/MatrixLib
```

## Тестирование

**Запуск тестов на примере main.c**
```sh
make test
```

## Вывод
В результате работы была разработана библиотека для работы с матрицами, 
включающая создание, арифметические и алгебраические операции, вывод и обработку ошибок. 
Библиотека легко расширяема и сопровождается удобным интерфейсом и системой обработки ошибок.